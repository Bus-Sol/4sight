<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record model="ir.ui.view" id="custom_view_partner_form">
        <field name="name">custom.view.partner.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//page/field[@name='child_ids']/kanban//t[@t-name='kanban-box']//div[hasclass('o_kanban_image')]"
                   position="replace">
                <div class="o_kanban_image">
                    <img alt="Contact image" t-if="record.image_128.raw_value"
                         t-att-src="kanban_image('res.partner', 'image_128', record.id.raw_value)"/>
                    <t t-if="!record.image_128.raw_value">
                        <img alt="Delivery" t-if="record.type.raw_value === 'delivery'"
                             t-att-src='_s + "/base/static/img/truck.png"'/>
                        <img alt="Vip" t-if="record.type.raw_value === 'vip'"
                             t-att-src='_s + "/4sight_module/static/img/vip.png"'/>
                        <img alt="Invoice" t-if="record.type.raw_value === 'invoice'"
                             t-att-src='_s + "/base/static/img/money.png"'/>
                        <t t-if="record.type.raw_value !== 'invoice' &amp;&amp; record.type.raw_value !== 'delivery' &amp;&amp; record.type.raw_value !== 'vip'">
                            <img alt="Logo" t-if="record.is_company.raw_value === true"
                                 t-att-src='_s + "/base/static/img/company_image.png"'/>
                            <img alt="Avatar" t-if="record.is_company.raw_value === false"
                                 t-att-src='_s + "/base/static/img/avatar_grey.png"'/>
                        </t>
                    </t>
                </div>
            </xpath>
        </field>
    </record>


    <record model="ir.ui.view" id="res_partner_kanban_view_add_custom_img">
        <field name="name">res.partner.kanban.add.custom.img</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.res_partner_kanban_view"/>
        <field name="arch" type="xml">
            <xpath expr="//kanban//t[@t-name='kanban-box']/div[hasclass('o_kanban_record_has_image_fill')]/t[@t-if='!record.is_company.raw_value']"
                   position="replace">
                <t t-if="!record.is_company.raw_value">
                    <t t-if="record.type.raw_value === 'delivery'" t-set="placeholder"
                       t-value="'/base/static/img/truck.png'"/>
                    <t t-elif="record.type.raw_value === 'vip'" t-set="placeholder"
                       t-value="'/4sight_module/static/img/vip.png'"/>
                    <t t-elif="record.type.raw_value === 'invoice'" t-set="placeholder"
                       t-value="'/base/static/img/money.png'"/>
                    <t t-else="" t-set="placeholder" t-value="'/base/static/img/avatar_grey.png'"/>
                    <div class="o_kanban_image_fill_left d-none d-md-block"
                         t-attf-style="background-image:url('#{kanban_image('res.partner', 'image_128', record.id.raw_value,  placeholder)}')">
                        <img class="o_kanban_image_inner_pic" t-if="record.parent_id.raw_value"
                             t-att-alt="record.parent_id.value"
                             t-att-src="kanban_image('res.partner', 'image_128', record.parent_id.raw_value)"/>
                    </div>
                    <div class="o_kanban_image d-md-none"
                         t-attf-style="background-image:url('#{kanban_image('res.partner', 'image_128', record.id.raw_value,  placeholder)}')">
                        <img class="o_kanban_image_inner_pic" t-if="record.parent_id.raw_value"
                             t-att-alt="record.parent_id.value"
                             t-att-src="kanban_image('res.partner', 'image_128', record.parent_id.raw_value)"/>
                    </div>
                </t>
            </xpath>
        </field>
    </record>
</odoo>